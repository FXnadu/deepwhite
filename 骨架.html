/*!
 * Typora Theme Skeleton
 * File: my-theme.css
 * 
 * 这是一个 Typora 主题开发的骨架模板
 * 已基于此骨架创建了完整的 DeepWhite 主题 (deepwhite.css)
 * 
 * Tips:
 * 1) 把默认字号放在 html，上层用 rem（Typora 的字体缩放更友好）
 * 2) 主要样式尽量限定在 #write 下，避免污染 Typora 其它 UI
 * 3) 使用 CSS 变量便于主题定制
 * 4) 注意中英文排版的差异化处理
 * 
 * 完整主题文件：
 * - deepwhite.css: 主题样式文件
 * - README.md: 安装和使用说明
 * - preview.md: 主题预览文档
 */

/* =========================
   0. 主题变量（推荐先改这里）
   ========================= */
:root {
  /* 基础色 */
  --bg-color: #ffffff;
  --text-color: #222222;
  --muted-color: #666666;
  --border-color: #e6e6e6;
  --accent-color: #4f46e5;

  /* 排版 */
  --font-sans: system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;

  /* 版心 */
  --content-max-width: 860px;
  --content-padding: 28px;

  /* 代码 */
  --code-bg: #f6f8fa;
  --inline-code-bg: #f3f4f6;

  /* 引用 */
  --quote-bg: #fafafa;
  --quote-border: #d0d0d0;

  /* 表格 */
  --table-header-bg: #f8f8f8;

  /* 选中/高亮 */
  --selection-bg: rgba(79, 70, 229, 0.18);
}

/* （可选）暗色主题：你可以复制一份另存为 my-theme-dark.css
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #0b0f14;
    --text-color: #e6e6e6;
    --muted-color: #a0a0a0;
    --border-color: #263041;
    --accent-color: #8b7cff;
    --code-bg: #111827;
    --inline-code-bg: #111827;
    --quote-bg: #0f1620;
    --quote-border: #2b3a52;
    --table-header-bg: #0f1620;
    --selection-bg: rgba(139, 124, 255, 0.22);
  }
}
*/

/* =========================
   1. 全局字号（官方建议：html 控制默认字号）
   ========================= */
html {
  font-size: 16px; /* 用 rem 时这里是全局基准 */
}

::selection {
  background: var(--selection-bg);
}

/* =========================
   2. 写作区容器（#write）
   ========================= */
#write {
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: var(--content-padding);

  background: var(--bg-color);
  color: var(--text-color);

  font-family: var(--font-sans);
  line-height: 1.75;
  word-break: break-word;
}

/* 可选：窗口背景（如果你只想改正文，就别动 body）
body { background: var(--bg-color); }
*/

/* =========================
   3. 基础元素
   ========================= */
#write p {
  margin: 0 0 1rem;
}

#write a {
  color: var(--accent-color);
  text-decoration: none;
}
#write a:hover {
  text-decoration: underline;
}

#write strong { font-weight: 650; }
#write em { font-style: italic; }
#write del { opacity: 0.8; }

#write hr {
  border: 0;
  border-top: 1px solid var(--border-color);
  margin: 1.25rem 0;
}

/* =========================
   4. 标题（Typora 常见：h1~h6 + .md-heading）
   ========================= */
#write h1.md-heading,
#write h2.md-heading,
#write h3.md-heading,
#write h4.md-heading,
#write h5.md-heading,
#write h6.md-heading {
  margin: 1.6rem 0 0.9rem;
  font-weight: 700;
  line-height: 1.25;
}

#write h1.md-heading { font-size: 2.0rem; }
#write h2.md-heading { font-size: 1.6rem; }
#write h3.md-heading { font-size: 1.3rem; }
#write h4.md-heading { font-size: 1.1rem; }
#write h5.md-heading { font-size: 1.0rem; }
#write h6.md-heading { font-size: 0.9rem; color: var(--muted-color); }

/* =========================
   5. 引用（blockquote）
   ========================= */
#write blockquote {
  margin: 1rem 0;
  padding: 0.75rem 1rem;
  background: var(--quote-bg);
  border-left: 4px solid var(--quote-border);
  color: var(--muted-color);
}
#write blockquote p {
  margin: 0.25rem 0;
}

/* =========================
   6. 列表 & 任务列表
   ========================= */
#write ul,
#write ol {
  margin: 0 0 1rem;
  padding-left: 1.5rem;
}

#write li {
  margin: 0.25rem 0;
}

#write li.md-task-list-item {
  list-style: none;
  padding-left: 0;
  margin-left: -1.25rem; /* 让 checkbox 对齐 */
}

#write li.md-task-list-item > input[type="checkbox"] {
  transform: translateY(1px);
  margin-right: 0.5rem;
}

/* =========================
   7. 行内代码 & 代码块
   ========================= */
#write code.md-inline-code {
  font-family: var(--font-mono);
  font-size: 0.95em;
  background: var(--inline-code-bg);
  border: 1px solid var(--border-color);
  padding: 0.05em 0.4em;
  border-radius: 6px;
}

#write pre.md-fences {
  margin: 1rem 0;
  padding: 1rem 1rem;
  background: var(--code-bg);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  overflow: auto;
}

#write pre.md-fences code {
  font-family: var(--font-mono);
  font-size: 0.92rem;
  line-height: 1.6;
}

/* 代码块右上角语言标签（如果存在） */
#write .code-lang {
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: var(--muted-color);
  opacity: 0.9;
}

/* =========================
   8. 表格
   ========================= */
#write table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
  overflow: hidden;
}

#write th,
#write td {
  border: 1px solid var(--border-color);
  padding: 0.6rem 0.7rem;
  vertical-align: top;
}

#write th {
  background: var(--table-header-bg);
  font-weight: 650;
}

/* =========================
   9. 图片
   ========================= */
#write img {
  max-width: 100%;
  height: auto;
}

#write .md-image-caption {
  display: block;
  margin-top: 0.35rem;
  text-align: center;
  color: var(--muted-color);
  font-size: 0.85rem;
}

/* =========================
   10. 数学/图表（可选）
   ========================= */
#write .math.block {
  margin: 1rem 0;
  overflow-x: auto;
}

#write .md-diagram-panel {
  margin: 1rem 0;
}

/* =========================
   11. 脚注（可选）
   ========================= */
#write .footnote-ref {
  font-size: 0.8em;
}

#write .footnotes {
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px dashed var(--border-color);
  color: var(--muted-color);
  font-size: 0.95rem;
}

/* =========================
   12. Typora “元字符/语法”显示（高级：一般不用动）
   ========================= */
/* 元字符（如 **、== 等）通常在 .md-meta 里；默认可能隐藏 */
#write .md-meta { color: var(--muted-color); opacity: 0.7; }

/* =========================
   13. 源码模式（CodeMirror）兼容（可选）
   ========================= */
/* 源码模式主题类名常见为 .cm-s-typora-default
   代码块语法高亮常见为 .cm-s-inner
   这里只给骨架，按需补色 */
.cm-s-typora-default,
.cm-s-inner {
  font-family: var(--font-mono);
}

/* =========================
   14. 打印 / 导出 PDF（可选）
   ========================= */
@media print {
  #write {
    max-width: none;
    padding: 0;
  }
  /* 导出彩色背景等（按需启用）
  .typora-export * { -webkit-print-color-adjust: exact; }
  */
}
